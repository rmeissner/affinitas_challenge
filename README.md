# Affinitas Code Challenge App

### Setup
* Import project to Android Studio 3.0 (was tested with Beta 2)

### Architecture Decisions:

* Different models are used for storage, networking and UI. This minimizes the dependencies between the different components. E.g.: we don't need to change our UI components when a network model changes.

### Library choices:

* Kotlin: I currently use Kotlin for most of my projects as it is more convenient (null safety, easier class declaration -> e.g. data classes).
* Room: Persistence library that creates a wrapper around SQLite. I wanted to try this out as it is relatively new and was introduced by Google on the I/O.
* RxJava2: Threading library, that allows us to observe changes. I also wanted to test the combination of Room and RxJava
* Picasso: Image Loading Library, that I am very familiar with. Alternative would be Glide.
* Dagger2: Dependency injection. This allows us change the used implementations for testing (or other flavors if wanted)

### Notes

* It doesn't work to observe single db entries with room. Room will trigger all observables based on the table that they observe
  * We could use a relay to publish changes. This would require an additional call in the viewholder (one to load the initial state, another for observing updates)
  * For now we will stick with using room flowables as we only have a low number of items listening at once (in a real app I would change it)
  
### Tests

* There are two types of tests: UI tests and pure unit tests
  * There is a simple UI test with espresso that checks that the correct number of entries is displayed (MainActivityTest)
  * There is a simple jUnit test that tests the LoginViewModel (LoginViewModelTest)
    * All public methods are tested with all possible outputs (100% branches)
    * It was tested that the observcables are cleaned up properly when the model becomes inactive
* To calculate the correct coverage, we would need to ignore all classes generated by Dagger or Retrofit or some other library